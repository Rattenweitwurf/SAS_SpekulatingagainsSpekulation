<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Munich Map</title>

<!-- Mapbox CSS -->
<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">

<style>
  body {
    margin: 0;
    padding: 0;
  }
  #map {
    width: 100%;
    height: 100vh;
  }
</style>

</head>
<body>

<div id="map"></div>

<!-- Mapbox JS -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

<script>
  mapboxgl.accessToken = 'pk.eyJ1Ijoib3B0aW1pc3RvZmZpY2UiLCJhIjoiY21pcm41aHU0MGRxZjNoc2F0cWRheHltMSJ9.8P5I-q4YOSli0CEHn_9MNg';

  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',  // replace with your custom style
    center: [11.57549, 48.13743],                          // Munich – Marienplatz
    zoom: 13
  });

  const geojson = {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {
          "title": "Agnesstraße 48",
          "url": "https://035660-copy.cargo.site/agnesstraße-48"  // relative Cargo page URL
        },
        "geometry": {
          "type": "Point",
          "coordinates": [11.567768, 48.157715]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "title": "Pappenheimstraße 14",
          "url": "/isartor"  // relative Cargo page URL
        },
        "geometry": {
          "type": "Point",
          "coordinates": [11.551325, 48.147133]
        }
      }
    ]
  };

  geojson.features.forEach(function (feature) {

    const marker = new mapboxgl.Marker()
      .setLngLat(feature.geometry.coordinates)
      .addTo(map);

    const popup = new mapboxgl.Popup({
      offset: 25,
      closeButton: false,
      closeOnClick: false
    }).setText(feature.properties.title);

    const el = marker.getElement();

    // Hover: show label
    el.addEventListener('mouseenter', () => {
      popup.setLngLat(feature.geometry.coordinates).addTo(map);
    });

    // Hover off: hide label
    el.addEventListener('mouseleave', () => {
      popup.remove();
    });

    // Click: go to Cargo page
    el.addEventListener('click', () => {
      window.location.href = feature.properties.url;
    });
  });
</script>

</body>
</html>

