<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Munich Map</title>

<!-- Mapbox CSS -->
<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">

<style>
  body {
    margin: 0;
    padding: 0;
  }

  #map {
    width: 100%;
    height: 100vh;
  }

  /* ------------------- */
  /* CUSTOM MARKER STYLE */
  /* ------------------- */

 .custom-marker {
  position: relative;
  width: 18px;
  height: 18px;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.custom-marker::before,
.custom-marker::after {
  content: '';
  position: absolute;
  background-color: black;
}

/* Vertical line */
.custom-marker::before {
  width: 3px;
  height: 18px;
  left: 50%;
  top: 0;
  transform: translateX(-50%);
}

/* Horizontal line */
.custom-marker::after {
  width: 18px;
  height: 3px;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
}

.custom-marker:hover {
  transform: scale(1.2);
}

  /* ------------------- */
  /* CUSTOM POPUP STYLE */
  /* ------------------- */

  .mapboxgl-popup-content {
    background: white;
    color: black;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 13px;
    padding: 6px 10px;
    border-radius: 0;
    box-shadow: none;
  }

  .mapboxgl-popup-tip {
    display: none;
  }
</style>
</head>

<body>

<div id="map"></div>

<!-- Mapbox JS -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

<script>
  mapboxgl.accessToken = 'pk.eyJ1Ijoib3B0aW1pc3RvZmZpY2UiLCJhIjoiY21pcm41aHU0MGRxZjNoc2F0cWRheHltMSJ9.8P5I-q4YOSli0CEHn_9MNg';

  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',
    center: [11.57549, 48.13743], // Munich – Marienplatz
    zoom: 13
  });

  const geojson = {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {
          "title": "Agnesstraße 48",
          "url": "https://035660-copy.cargo.site/agnesstraße-48"
        },
        "geometry": {
          "type": "Point",
          "coordinates": [11.567768, 48.157715]
        }
      },
       {
        "type": "Feature",
        "properties": {
          "title": "Occamstraße 1",
          "url": "https://035660-copy.cargo.site/agnesstraße-48"
        },
        "geometry": {
          "type": "Point",
          "coordinates": [11.589052, 48.161555]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "title": "Pappenheimstraße 14",
          "url": "/isartor"
        },
        "geometry": {
          "type": "Point",
          "coordinates": [11.551325, 48.147133]
        }
      }
    ]
  };


  geojson.features.forEach(function (feature) {

    // Create custom marker element
    const el = document.createElement('div');
    el.className = 'custom-marker';

    // Create marker
    const marker = new mapboxgl.Marker(el)
      .setLngLat(feature.geometry.coordinates)
      .addTo(map);

    // Create popup
    const popup = new mapboxgl.Popup({
      offset: 15,
      closeButton: false,
      closeOnClick: false
    }).setHTML(`
      <div class="popup-content">
        ${feature.properties.title}
      </div>
    `);

    // Hover: show label
    el.addEventListener('mouseenter', () => {
      popup.setLngLat(feature.geometry.coordinates).addTo(map);
    });

    // Hover off: hide label
    el.addEventListener('mouseleave', () => {
      popup.remove();
    });

    // Click: go to Cargo page
    el.addEventListener('click', () => {
      window.location.href = feature.properties.url;
    });

  });
</script>

</body>
</html>
